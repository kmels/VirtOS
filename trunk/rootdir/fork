; fork
; Crea multiples procesos
; 10/03/2010
; Deberia imprimir 1,2

echo "antes de fork \n"
; Crear procesos hijos
Fork "base 2 p1" r1 
Fork "base 1 p8" r2

'loop'

echo "antes de sleep \n"
; Ceder CPU a procesos hijos
Sleep

echo "despues de sleep \n"

; Obtener resultados de procesos hijos
GetState r1 r4 r5
GetState r2 r4 r6

echo r1
echo "\n"
echo r2

echo "get state"
; Procesos hijo terminados tienen resultado = 1
; Iteramos hasta que los procesos hijos terminen
Set r0 2
Sub r0 r0 r5
Sub r0 r0 r6

jmp r0 loop

Echo "ya casi fin \n"
End 1